
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>TUYA BLE Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-gtalk/gtalk.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-sf-score/style/scorePlugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="BLE.html" />
    
    
    <link rel="prev" href="Push_umeng.html" />
    

    
        <link rel="shortcut icon" href='../zh-hans/resource/images/bitbug_favicon.ico' type="image/x-icon">
    
    
    
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"TuyaInc","repo":"tuyasmart_home_android_sdk","type":"star","size":"small"},{"user":"TuyaInc","repo":"tuyasmart_home_android_sdk","type":"watch","size":"small"},{"user":"TuyaInc","type":"follow","size":"small","count":true}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Features Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Preparation.html">
            
                <a href="Preparation.html">
            
                    
                    Preparation for Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Integrated.html">
            
                <a href="Integrated.html">
            
                    
                    Integrate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Demo.html">
            
                <a href="Demo.html">
            
                    
                    Demo App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="User.html">
            
                <a href="User.html">
            
                    
                    User Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="User_mobile.html">
            
                <a href="User_mobile.html">
            
                    
                    Use Mobile Phone for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="User_email.html">
            
                <a href="User_email.html">
            
                    
                    Use Email for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="User_uid.html">
            
                <a href="User_uid.html">
            
                    
                    Use Uid for Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="User_ThirdLogin.html">
            
                <a href="User_ThirdLogin.html">
            
                    
                    Third Party Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="User_Auth2.html">
            
                <a href="User_Auth2.html">
            
                    
                    Login by Auth2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="User_Tourist.html">
            
                <a href="User_Tourist.html">
            
                    
                    Anonymous Registration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="User_qrlogin.html">
            
                <a href="User_qrlogin.html">
            
                    
                    QR code authorization login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="User_update.html">
            
                <a href="User_update.html">
            
                    
                    Modify User Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="User_logout.html">
            
                <a href="User_logout.html">
            
                    
                    Logout, Disable Account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="User_model.html">
            
                <a href="User_model.html">
            
                    
                    User Data Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="User_Session.html">
            
                <a href="User_Session.html">
            
                    
                    Handling of Expired Session
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="HomeAbout.html">
            
                <a href="HomeAbout.html">
            
                    
                    Home Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="FamilyManager.html">
            
                <a href="FamilyManager.html#home-relationship-management">
            
                    
                    Home Relationship Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="FamilyManager.html">
            
                <a href="FamilyManager.html#family-management">
            
                    
                    Operation of Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="FamilyManager.html">
            
                <a href="FamilyManager.html#family-member-management">
            
                    
                    Home Member Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="FamilyManager.html">
            
                <a href="FamilyManager.html#room-information-management">
            
                    
                    Room Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="FamilyManager.html">
            
                <a href="FamilyManager.html#home-weather">
            
                    
                    Home's Weather
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Activator_device.html">
            
                <a href="Activator_device.html">
            
                    
                    Device Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Activator_device.html">
            
                <a href="Activator_device.html#functional-overview">
            
                    
                    Functional Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="Activator_device.html">
            
                <a href="Activator_device.html#instructions">
            
                    
                    Instructions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="Activator_device.html">
            
                <a href="Activator_device.html#implementation">
            
                    
                    Implementation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="Activator_device.html">
            
                <a href="Activator_device.html#quick-connection-mode">
            
                    
                    Quick Connection Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.2" data-path="Activator_device.html">
            
                <a href="Activator_device.html#hotspot-mode">
            
                    
                    Hotspot Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3" data-path="Activator_device.html">
            
                <a href="Activator_device.html#camera-scan-code-network-configuration">
            
                    
                    Camera Scan Code Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4" data-path="Activator_device.html">
            
                <a href="Activator_device.html#wired-network-configuration">
            
                    
                    Wired Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.5" data-path="Activator_device.html">
            
                <a href="Activator_device.html#sub-device-configuration">
            
                    
                    Sub-device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.6" data-path="Activator_device.html">
            
                <a href="Activator_device.html#scan-the-qr-code-of-the-device-configuration">
            
                    
                    Scan The QR Code Of The Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.7" data-path="Activator_device.html">
            
                <a href="Activator_device.html#bluetooth-configuration">
            
                    
                    Bluetooth Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Device.html">
            
                <a href="Device.html#device-management">
            
                    
                    Device Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Device.html">
            
                <a href="Device.html#initialize-device">
            
                    
                    Initialize Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="Device.html">
            
                <a href="Device.html#device-data-listener">
            
                    
                    Device Data Listener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="Device.html">
            
                <a href="Device.html#device-control">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="Device.html">
            
                <a href="Device.html#functions-of-device">
            
                    
                    Functions of Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="Device.html">
            
                <a href="Device.html#querying-device-information">
            
                    
                    Querying Device Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="Device.html">
            
                <a href="Device.html#modify-the-device-name">
            
                    
                    Modify the Device Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="Device.html">
            
                <a href="Device.html#remove-device">
            
                    
                    Remove Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="Device.html">
            
                <a href="Device.html#restore-factory-settings">
            
                    
                    Restore Factory Settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="Device.html">
            
                <a href="Device.html#obtain-wi-fi-signal-strength">
            
                    
                    Obtain Wi-Fi Signal Strength
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="Device.html">
            
                <a href="Device.html#recycling-device-resources">
            
                    
                    Recycling Device Resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="OTA.html">
            
                <a href="OTA.html">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="Gateway.html">
            
                <a href="Gateway.html">
            
                    
                    ZigBee Gateway Control
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html">
            
                    
                    Device Multi-control
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Overview">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Business-Flowchart">
            
                    
                    Business Flowchart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Get-Device-Dp-Information">
            
                    
                    Get Device Dp Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Query-Related-Information-of-a-Dp">
            
                    
                    Query Related Information of a Dp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Add,Update,Delete-Multi-controll-Groups">
            
                    
                    Add Multi-control Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Add,Update,Delete-Multi-controll-Groups">
            
                    
                    Update Multi-control Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Enable-or-Disable-Multi-control-Group">
            
                    
                    Enable or Disable Multi-control Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Query-Devices-that-Support-Multi-control">
            
                    
                    Query Devices that Support Multi-control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="DeviceMultiControl.html">
            
                <a href="DeviceMultiControl.html#Get-Affiliate-Device-Details">
            
                    
                    Get Affiliate Device Details
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Shared.html">
            
                <a href="Shared.html#shared-devices">
            
                    
                    Shared Devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="Shared.html">
            
                <a href="Shared.html#add-device-share">
            
                    
                    Add Device Share
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="Shared.html">
            
                <a href="Shared.html#getting-shared-relationships">
            
                    
                    Getting Shared Relationships
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="Shared.html">
            
                <a href="Shared.html#remove-sharing">
            
                    
                    Remove Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="Shared.html">
            
                <a href="Shared.html#modify-note-name">
            
                    
                    Modify Note Name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Timer.html">
            
                <a href="Timer.html">
            
                    
                    Timer Task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Group.html">
            
                <a href="Group.html">
            
                    
                    Group Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="Group.html">
            
                <a href="Group.html#functional-overview">
            
                    
                    Functional Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="Group.html">
            
                <a href="Group.html#create-group">
            
                    
                    Create Group
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.2.1" data-path="Group.html">
            
                <a href="Group.html#create-wi-fi-group">
            
                    
                    Create Wi-Fi Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.2" data-path="Group.html">
            
                <a href="Group.html#create-zigbee-group">
            
                    
                    Create ZigBee Group
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="Group.html">
            
                <a href="Group.html#group-operation">
            
                    
                    Group Operation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.3.1" data-path="Group.html">
            
                <a href="Group.html#instantiation">
            
                    
                    Instantiation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.2" data-path="Group.html">
            
                <a href="Group.html#modifying-group-name">
            
                    
                    Modifying group name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.3" data-path="Group.html">
            
                <a href="Group.html#dismiss-group">
            
                    
                    Dismiss Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.4" data-path="Group.html">
            
                <a href="Group.html#sending-group-control-command">
            
                    
                    Sending group control command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.5" data-path="Group.html">
            
                <a href="Group.html#group-callback-event">
            
                    
                    Group callback event
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.6" data-path="Group.html">
            
                <a href="Group.html#group-data-acquisition">
            
                    
                    Group data acquisition
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="SmartScene_Manager.html">
            
                <a href="SmartScene_Manager.html">
            
                    
                    Smart Scene
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="SmartScene_Manager.html">
            
                <a href="SmartScene_Manager.html#scene-condition">
            
                    
                    Scene Condition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="SmartScene_Manager.html">
            
                <a href="SmartScene_Manager.html#scene-task">
            
                    
                    Scene Task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="SmartScene_Manager.html">
            
                <a href="SmartScene_Manager.html#smart-scene-management">
            
                    
                    Smart Scene Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="SmartScene_Manager.html">
            
                <a href="SmartScene_Manager.html#scene-operation">
            
                    
                    Scene Operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Message.html">
            
                <a href="Message.html#message-center">
            
                    
                    Message Center
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="Message.html">
            
                <a href="Message.html#message">
            
                    
                    Message
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="Message.html">
            
                <a href="Message.html#push-notification">
            
                    
                    Push Notification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Feedback.html">
            
                <a href="Feedback.html#feedback">
            
                    
                    Feedback
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-talk-list">
            
                    
                    Obtain Feedback Talk List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-list">
            
                    
                    Obtain Feedback List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="Feedback.html">
            
                <a href="Feedback.html#obtain-feedback-type-list">
            
                    
                    Obtain Feedback Type List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="Feedback.html">
            
                <a href="Feedback.html#add-feedback">
            
                    
                    Add Feedback
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Push.html">
            
                <a href="Push.html">
            
                    
                    Integrate Push
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="Push_fcm.html">
            
                <a href="Push_fcm.html">
            
                    
                    FCM Push
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="Push_umeng.html">
            
                <a href="Push_umeng.html">
            
                    
                    Umeng
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter active" data-level="2.1" data-path="BLE.html">
            
                <a href="BLE.html">
            
                    
                    TUYA BLE
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="BLE.html">
            
                <a href="BLE.html#bluetooth-low-energy">
            
                    
                    Bluetooth Low Energy
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1.1" data-path="BLE.html">
            
                <a href="BLE.html#prepare">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.2" data-path="BLE.html">
            
                <a href="BLE.html#scan-device">
            
                    
                    Scan Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.3" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-activation">
            
                    
                    BLE Device Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.4" data-path="BLE.html">
            
                <a href="BLE.html#dual-mode-device-activation">
            
                    
                    Dual-mode Device Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.5" data-path="BLE.html">
            
                <a href="BLE.html#ble-device-function">
            
                    
                    BLE Device Function
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.6" data-path="BLE.html">
            
                <a href="BLE.html#ble-ota">
            
                    
                    BLE OTA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.1.7" data-path="BLE.html">
            
                <a href="BLE.html#error-code">
            
                    
                    Error Code
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#bluetooth-mesh-sig">
            
                    
                    Bluetooth Mesh (SIG)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.2.1" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#prepare">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.2" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#basic-notion">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.3" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.4" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#activation">
            
                    
                    Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.5" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.6" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.7" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2.8" data-path="Mesh_SIG.html">
            
                <a href="Mesh_SIG.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#bluetooth-mesh-tuya">
            
                    
                    Bluetooth Mesh (TUYA)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.3.1" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#prepare">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.2" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#basic-notion">
            
                    
                    Basic Notion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.3" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#management">
            
                    
                    Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.4" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#activation">
            
                    
                    Activation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.5" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#device">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.6" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#group">
            
                    
                    Group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.7" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#control">
            
                    
                    Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3.8" data-path="Mesh_Tuya.html">
            
                <a href="Mesh_Tuya.html#firmware-upgrade">
            
                    
                    Firmware Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="ExtensionAbout.html">
            
                <a href="ExtensionAbout.html">
            
                    
                    Extension SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="ipc/">
            
                <a href="ipc/">
            
                    
                    IPC SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.1" data-path="ipc/Integrated.html">
            
                <a href="ipc/Integrated.html">
            
                    
                    Integrate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.2" data-path="ipc/ProgramArchitecure.html">
            
                <a href="ipc/ProgramArchitecure.html">
            
                    
                    SDK Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.3" data-path="ipc/home_device.html">
            
                <a href="ipc/home_device.html#Camera device">
            
                    
                    Camera Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.4" data-path="ipc/wifi_config.html">
            
                <a href="ipc/wifi_config.html">
            
                    
                    Device Configutation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.5" data-path="ipc/LiveProcess.html">
            
                <a href="ipc/LiveProcess.html">
            
                    
                    Camera Functions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.5.1" data-path="ipc/LiveProcess.html">
            
                <a href="ipc/LiveProcess.html#Live video">
            
                    
                    Live Video
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.5.2" data-path="ipc/PlaybackProcess.html">
            
                <a href="ipc/PlaybackProcess.html">
            
                    
                    Playback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.5.3" data-path="ipc/av_function.html">
            
                <a href="ipc/av_function.html">
            
                    
                    AV Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.6" data-path="ipc/cloud_video.html">
            
                <a href="ipc/cloud_video.html">
            
                    
                    Cloud Storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.6.1" data-path="ipc/cloud_video.html">
            
                <a href="ipc/cloud_video.html#Process">
            
                    
                    Flow Chart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.6.2" data-path="ipc/cloud_video.html">
            
                <a href="ipc/cloud_video.html#Purchase">
            
                    
                    Cloud Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.6.3" data-path="ipc/cloud_video.html">
            
                <a href="ipc/cloud_video.html#Cloud video">
            
                    
                    Cloud Video
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.7" data-path="ipc/camera_device_points.html">
            
                <a href="ipc/camera_device_points.html#Device function points">
            
                    
                    Extension Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.7.1" data-path="ipc/camera_device_points.html">
            
                <a href="ipc/camera_device_points.html#Function points constant">
            
                    
                    Data Point Id
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.7.2" data-path="ipc/doorbell.html">
            
                <a href="ipc/doorbell.html">
            
                    
                    Doorbell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.7.3" data-path="ipc/sd_card.html">
            
                <a href="ipc/sd_card.html">
            
                    
                    Memory Card
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.7.4" data-path="ipc/ptz.html">
            
                <a href="ipc/ptz.html">
            
                    
                    PTZ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.8" data-path="ipc/Camera_Message_Center.html">
            
                <a href="ipc/Camera_Message_Center.html#Detection alarm">
            
                    
                    Detection Alarm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.8.1" data-path="ipc/Camera_Message_Center.html">
            
                <a href="ipc/Camera_Message_Center.html#Message List">
            
                    
                    Message List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.8.2" data-path="ipc/Camera_Message_Center.html">
            
                <a href="ipc/Camera_Message_Center.html#Video message">
            
                    
                    Video Message
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.1.9" data-path="ipc/statusCode.html">
            
                <a href="ipc/statusCode.html">
            
                    
                    Error Codes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.1.10" data-path="ipc/doc_update_log.html">
            
                <a href="ipc/doc_update_log.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="sweeper/Overview.html">
            
                <a href="sweeper/Overview.html">
            
                    
                    Sweeper SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.2.1" data-path="sweeper/Gyro_Sweeper.html">
            
                <a href="sweeper/Gyro_Sweeper.html">
            
                    
                    Gyroscope and Visual Sweeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.2" data-path="sweeper/Laser_Sweeper.html">
            
                <a href="sweeper/Laser_Sweeper.html">
            
                    
                    Laser Sweeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.3" data-path="sweeper/Voice_Download.html">
            
                <a href="sweeper/Voice_Download.html">
            
                    
                    Voice Package Download
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.4" data-path="sweeper/Word_Introduction.html">
            
                <a href="sweeper/Word_Introduction.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.5" data-path="sweeper/Update_Log.html">
            
                <a href="sweeper/Update_Log.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="Lock.html">
            
                <a href="Lock.html#">
            
                    
                    Smart Lock SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.3.1" data-path="WiFiLockDoc.html">
            
                <a href="WiFiLockDoc.html">
            
                    
                     Wi-Fi Lock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3.2" data-path="BLELockDoc.html">
            
                <a href="BLELockDoc.html">
            
                    
                    BLE Lock
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="CommonInterface.html">
            
                <a href="CommonInterface.html">
            
                    
                    Common Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="ErrorCode.html">
            
                <a href="ErrorCode.html">
            
                    
                    Error Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="FAQ.html">
            
                <a href="FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="ChangeLog.html">
            
                <a href="ChangeLog.html">
            
                    
                    Change Log
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="Update_3_14_0.html">
            
                <a href="Update_3_14_0.html">
            
                    
                    Upgrade guide before 3.13.0 to version after 3.14.x
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >TUYA BLE</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#bluetooth-low-energy"><b>1. </b>Bluetooth Low Energy</a></li><ul><li><span class="title-icon "></span><a href="#prepare"><b>1.1. </b>Prepare</a></li><li><span class="title-icon "></span><a href="#scan-device"><b>1.2. </b>Scan Device</a></li><ul><li><span class="title-icon "></span><a href="#start-scanning"><b>1.2.1. </b>Start Scanning</a></li><li><span class="title-icon "></span><a href="#stop-scanning"><b>1.2.2. </b>Stop Scanning</a></li></ul><li><span class="title-icon "></span><a href="#ble-device-activation"><b>1.3. </b>BLE Device Activation</a></li><ul><li><span class="title-icon "></span><a href="#start--activation"><b>1.3.1. </b>Start  Activation</a></li><li><span class="title-icon "></span><a href="#cancel-activation"><b>1.3.2. </b>Cancel Activation</a></li></ul><li><span class="title-icon "></span><a href="#dual-mode-device-activation"><b>1.4. </b>Dual-mode Device Activation</a></li><ul><li><span class="title-icon "></span><a href="#start-dual-mode-device-activation"><b>1.4.1. </b>Start Dual-mode Device Activation</a></li><li><span class="title-icon "></span><a href="#cancel-dual-mode-device-activation"><b>1.4.2. </b>Cancel Dual-mode Device Activation</a></li></ul><li><span class="title-icon "></span><a href="#ble-device-function"><b>1.5. </b>BLE Device Function</a></li><ul><li><span class="title-icon "></span><a href="#device-status-query"><b>1.5.1. </b>Device Status Query</a></li><li><span class="title-icon "></span><a href="#connect-device"><b>1.5.2. </b>Connect Device</a></li><li><span class="title-icon "></span><a href="#ble-device-function_1"><b>1.5.3. </b>BLE Device Function</a></li></ul><li><span class="title-icon "></span><a href="#ble-ota"><b>1.6. </b>BLE OTA</a></li><ul><li><span class="title-icon "></span><a href="#checking-firmware-information"><b>1.6.1. </b>Checking Firmware Information</a></li><li><span class="title-icon "></span><a href="#ota-upgrade"><b>1.6.2. </b>OTA Upgrade</a></li></ul><li><span class="title-icon "></span><a href="#error-code"><b>1.7. </b>Error Code</a></li></ul></ul></div><a href="#bluetooth-low-energy" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="bluetooth-low-energy"><a name="bluetooth-low-energy" class="anchor-navigation-ex-anchor" href="#bluetooth-low-energy"><i class="fa fa-link" aria-hidden="true"></i></a>1. Bluetooth Low Energy</h1>
<p>Tuya Bluetooth has 3 technology lines.</p>
<ul>
<li><strong>SingleBLE</strong>: Bluetooth single point device, one-to-one connection between Bluetooth device and phone;</li>
<li><strong>TuyaMesh</strong>:  Mesh released by Tuya.</li>
<li><strong>SigMesh</strong>: Mesh released by SIG (Bluetooth Special Interest Group). 
In addition to the above three, there are some multi-protocol devices, such as <strong>Dual-mode Device</strong> with Wi-Fi and BLE capabilities. You can use both BLE and Wi-Fi capabilities.</li>
</ul>
<table>
<thead>
<tr>
<th>Category</th>
<th>Product Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>SingleBLE</td>
<td>Body fat scale, bracelet, electric toothbrush, door lock, etc.</td>
</tr>
<tr>
<td>SigMesh</td>
<td>Light bulb, socket, sensor,etc.</td>
</tr>
<tr>
<td>TuyaMesh</td>
<td>Light bulb, socket, sensor,etc.</td>
</tr>
<tr>
<td>Dual-mode Device</td>
<td>Sigmesh gateways, IPC devices, and new multi-protocol Wi-Fi devices are all possible</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The activation of dual-mode devices uses SingleBLE technology, which will be described in the SingleBLE chapter.</p>
</blockquote>
<p>The Bluetooth part has the following functions:</p>
<p><strong>1.Activate Device</strong></p>
<ul>
<li>Scan BLE devices</li>
<li>Device activation</li>
</ul>
<p><strong>2.Device Function</strong></p>
<ul>
<li>Check device connection status</li>
<li>Connect To BLE Device</li>
<li>Device Function</li>
<li>Unbind Device</li>
</ul>
<p><strong>3.Upgrade Firmware</strong></p>
<ul>
<li>Check device new  version</li>
<li>OTA(Upgrade device firmware)</li>
</ul>
<h2 id="prepare"><a name="prepare" class="anchor-navigation-ex-anchor" href="#prepare"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Prepare</h2>
<p><strong>Mobile System Requirements</strong></p>
<p>TuyaHomesdk has been supported since Android 4.4.   API&gt;=19</p>
<p><strong>Manifest Permissions</strong></p>
<pre class="language-"><code class="lang-java"><span class="token operator">&lt;</span><span class="token keyword">uses</span><span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token keyword">uses</span><span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token keyword">uses</span><span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token keyword">uses</span><span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.BLUETOOTH_ADMIN&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p><strong>Permissions  Check</strong></p>
<ul>
<li>Before the APP uses the Bluetooth connection or scanning operation, it needs to check whether the APP positioning permission is allowed.</li>
<li>Check if the Bluetooth status is on.</li>
</ul>
<h2 id="scan-device"><a name="scan-device" class="anchor-navigation-ex-anchor" href="#scan-device"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Scan Device</h2>
<p>Before developing BLE, you need to understand the basic logic of TuyaHomeSDK. You must already use TuyaHomeSdk to complete the basic operations such as initialization, login, and home creation.</p>
<h3 id="start-scanning"><a name="start-scanning" class="anchor-navigation-ex-anchor" href="#start-scanning"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. Start Scanning</h3>
<p>Unactivated Bluetooth devices will send Bluetooth broadcast packets to the surroundings, and the SDK will analyze the broadcast packets according to the protocol to find the surrounding Tuya Bluetooth single-point devices and dual-mode devices.</p>
<blockquote>
<p>Remind again: permissions check is required before scanning,  <strong>Only permissions allowable can work</strong>
1&#x3001;The Phone Bluetooth is on
2&#x3001;APP has positioning permission</p>
</blockquote>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">startLeScan</span><span class="token punctuation">(</span><span class="token keyword">int</span> timeout<span class="token punctuation">,</span> <span class="token class-name">ScanType</span> type<span class="token punctuation">,</span> <span class="token class-name">TyBleScanResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>param</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>timeout</td>
<td>Activation timeout, unit ms, 60s recommended</td>
</tr>
<tr>
<td>type</td>
<td>ScanType.SINGLE</td>
</tr>
<tr>
<td>response</td>
<td>calback,can not be empty</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleOperator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startLeScan</span><span class="token punctuation">(</span><span class="token number">60000</span><span class="token punctuation">,</span> <span class="token class-name">ScanType</span><span class="token punctuation">.</span>SINGLE<span class="token punctuation">,</span> <span class="token keyword">new</span>    <span class="token class-name">TyBleScanResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResult</span><span class="token punctuation">(</span><span class="token class-name">ScanDeviceBean</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Callback Description</strong> </p>
<p><code>ScanDeviceBean</code> description</p>
<table>
<thead>
<tr>
<th style="text-align:left">Attributes</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td>Scan ID usually consists of uuid, which can uniquely distinguish the device</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td>Bluetooth name of the device, usually blank</td>
</tr>
<tr>
<td style="text-align:left">providerName</td>
<td>SingleBleProvider</td>
</tr>
<tr>
<td style="text-align:left">data</td>
<td>raw data</td>
</tr>
<tr>
<td style="text-align:left"><strong>configType</strong></td>
<td>config_type_single&#xFF1A;single Device;config_type_wifi:Dual-mode device</td>
</tr>
<tr>
<td style="text-align:left">productId</td>
<td>product id</td>
</tr>
<tr>
<td style="text-align:left">uuid</td>
<td>product uuid,Device unique code</td>
</tr>
<tr>
<td style="text-align:left">mac</td>
<td>device mac</td>
</tr>
<tr>
<td style="text-align:left">isbind</td>
<td>binding status</td>
</tr>
<tr>
<td style="text-align:left">flag</td>
<td>bit0:Whether to support 5G Wi-Fi</td>
</tr>
</tbody>
</table>
<h3 id="stop-scanning"><a name="stop-scanning" class="anchor-navigation-ex-anchor" href="#stop-scanning"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. Stop Scanning</h3>
<p>Stop scanning devices, such as exiting the activation page</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">stopLeScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleOperator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stopLeScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="ble-device-activation"><a name="ble-device-activation" class="anchor-navigation-ex-anchor" href="#ble-device-activation"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. BLE Device Activation</h2>
<h3 id="start--activation"><a name="start--activation" class="anchor-navigation-ex-anchor" href="#start--activation"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. Start  Activation</h3>
<p>Scanned devices <code>configType = config_type_single</code> represents a single BLE device. <code>config_type_wifi</code> is a dual-mode device.</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">startBleConfig</span><span class="token punctuation">(</span><span class="token keyword">long</span> homeId<span class="token punctuation">,</span> <span class="token class-name">String</span> devUuid<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span> <span class="token class-name">ITuyaBleConfigListener</span> configListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>param</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>homeId</td>
<td>Current home&apos;s Id</td>
</tr>
<tr>
<td>devUuid</td>
<td>ScanDeviceBean.uuid</td>
</tr>
<tr>
<td>params</td>
<td>null,not need by SingleBLE</td>
</tr>
<tr>
<td>configListener</td>
<td>callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startBleConfig</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">,</span> <span class="token string">&quot;abc12345678&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ITuyaBleConfigListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">DeviceBean</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFail</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">Object</span> handle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token comment">// code msg ,see #Error Code</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="cancel-activation"><a name="cancel-activation" class="anchor-navigation-ex-anchor" href="#cancel-activation"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. Cancel Activation</h3>
<p>Stop it during Activation.</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">stopBleConfig</span><span class="token punctuation">(</span><span class="token class-name">String</span> devUuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>param</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devUuid</td>
<td>ScanDeviceBean.uuid</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stopBleConfig</span><span class="token punctuation">(</span><span class="token string">&quot;abc12345678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="dual-mode-device-activation"><a name="dual-mode-device-activation" class="anchor-navigation-ex-anchor" href="#dual-mode-device-activation"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Dual-mode Device Activation</h2>
<h3 id="start-dual-mode-device-activation"><a name="start-dual-mode-device-activation" class="anchor-navigation-ex-anchor" href="#start-dual-mode-device-activation"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. Start Dual-mode Device Activation</h3>
<p>Scanned devices <code>configType = config_type_single</code> represents a single BLE device. <code>config_type_wifi</code> is a dual-mode device.</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">startBleConfig</span><span class="token punctuation">(</span><span class="token keyword">long</span> homeId<span class="token punctuation">,</span> <span class="token class-name">String</span> devUuid<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span> <span class="token class-name">ITuyaBleConfigListener</span> configListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>param</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>homeId</td>
<td>Current home&apos;s Id</td>
</tr>
<tr>
<td>devUuid</td>
<td>ScanDeviceBean.uuid</td>
</tr>
<tr>
<td>params</td>
<td>Wi-Fi Network information: ssid, pwd, token</td>
</tr>
<tr>
<td>configListener</td>
<td>callback</td>
</tr>
</tbody>
</table>
<blockquote>
<p>If not specified, The Device only support 2.4G Wi-Fi network, and some devices support 5G. Can be determined based on <code>ScanDeviceBean.flag</code>.
token: The way to obtain the token is the same as  the Wi-Fi device. <a href="Activator_wifi.md#get-network-configuration-token">Get Token</a></p>
</blockquote>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> param <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  param<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;ssid&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tuya-Wi-Fi-2.4G&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Wi-Fi ssid</span>
  param<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;12345678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Wi-Fi pwd</span>
  param<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xxxxxxxxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// user token</span>
<span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startBleConfig</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">,</span> <span class="token string">&quot;xyz12345678&quot;</span><span class="token punctuation">,</span> param<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ITuyaBleConfigListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">DeviceBean</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFail</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">Object</span> handle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// code msg ,see #ErrorCode</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Callback Description</strong></p>
<p><code>DeviceBean</code> Description
See <a href="Device.html#device-information-acquisition">DeviceBean Data Model</a></p>
<h3 id="cancel-dual-mode-device-activation"><a name="cancel-dual-mode-device-activation" class="anchor-navigation-ex-anchor" href="#cancel-dual-mode-device-activation"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.2. Cancel Dual-mode Device Activation</h3>
<p>Stop it during Activation.</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">stopBleConfig</span><span class="token punctuation">(</span><span class="token class-name">String</span> devUuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>param</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devUuid</td>
<td>ScanDeviceBean.uuid</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stopBleConfig</span><span class="token punctuation">(</span><span class="token string">&quot;xyz12345678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="ble-device-function"><a name="ble-device-function" class="anchor-navigation-ex-anchor" href="#ble-device-function"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. BLE Device Function</h2>
<p><strong>Summary</strong></p>
<ol>
<li>Device status query</li>
<li>Device connection</li>
<li>Device sends instructions</li>
<li>Modify the device</li>
<li>Unbind the device</li>
</ol>
<h3 id="device-status-query"><a name="device-status-query" class="anchor-navigation-ex-anchor" href="#device-status-query"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.1. Device Status Query</h3>
<ul>
<li>The general query is the same as the Wi-Fi device (this status is a comprehensive status, if the Bluetooth device is added under the gateway, the Bluetooth device can be online in the cloud)<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getDataInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeviceBean</span><span class="token punctuation">(</span>devId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getIsOnline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</li>
<li>Query if the device is locally connected<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isBleLocalOnline</span><span class="token punctuation">(</span>devId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>Usually only the local state needs to be considered. Only Bluetooth devices that join the gateway need to consider whether the cloud is online.</p>
</blockquote>
</li>
</ul>
<h3 id="connect-device"><a name="connect-device" class="anchor-navigation-ex-anchor" href="#connect-device"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.2. Connect Device</h3>
<p>If the device is offline, you can call the connection method to connect the device.</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">addScanLinkTaskIds</span><span class="token punctuation">(</span><span class="token class-name">String</span> idJsonString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>param</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>idJsonString</td>
<td>String</td>
<td>devId List to json</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> devIdList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 devIdList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>devId1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//devId1</span>
 devIdList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>devId2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//devId2</span>

 <span class="token class-name">String</span> ids <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>devIdList<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addScanLinkTaskIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="ble-device-function_1"><a name="ble-device-function_1" class="anchor-navigation-ex-anchor" href="#ble-device-function_1"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.3. BLE Device Function</h3>
<p>Can monitor device status. This section is similar to Wi-Fi devices, please refer to it for more information <a href="Device.html">Wi-Fi Function</a></p>
<h4 id="device-information-acquisition"><a name="device-information-acquisition" class="anchor-navigation-ex-anchor" href="#device-information-acquisition"><i class="fa fa-link" aria-hidden="true"></i></a><a name="device-information-acquisition" class="plugin-anchor" href="#device-information-acquisition"><i class="fa fa-link" aria-hidden="true"></i></a>Device Information Acquisition</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#device-%20information-acquisition">Device Information Acquisition</a></p>
<h4 id="initial-device-control"><a name="initial-device-control" class="anchor-navigation-ex-anchor" href="#initial-device-control"><i class="fa fa-link" aria-hidden="true"></i></a><a name="initial-device-control" class="plugin-anchor" href="#initial-device-control"><i class="fa fa-link" aria-hidden="true"></i></a>Initial Device Control</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#initial-device-control">Initial Device Control</a></p>
<h4 id="register-device-listener"><a name="register-device-listener" class="anchor-navigation-ex-anchor" href="#register-device-listener"><i class="fa fa-link" aria-hidden="true"></i></a><a name="register-device-listener" class="plugin-anchor" href="#register-device-listener"><i class="fa fa-link" aria-hidden="true"></i></a>Register Device Listener</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#register-device-listener">Register Device Listener</a></p>
<h4 id="unregister-device-listener"><a name="unregister-device-listener" class="anchor-navigation-ex-anchor" href="#unregister-device-listener"><i class="fa fa-link" aria-hidden="true"></i></a><a name="unregister-device-listener" class="plugin-anchor" href="#unregister-device-listener"><i class="fa fa-link" aria-hidden="true"></i></a>Unregister Device Listener</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#unregister-device-listener">Unregister Device Listener</a></p>
<h4 id="function-points-of-device"><a name="function-points-of-device" class="anchor-navigation-ex-anchor" href="#function-points-of-device"><i class="fa fa-link" aria-hidden="true"></i></a><a name="function-points-of-device" class="plugin-anchor" href="#function-points-of-device"><i class="fa fa-link" aria-hidden="true"></i></a>Function Points of Device</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#function-points-of-device">Function Points of Device</a></p>
<h4 id="device-control-method"><a name="device-control-method" class="anchor-navigation-ex-anchor" href="#device-control-method"><i class="fa fa-link" aria-hidden="true"></i></a><a name="device-control-method" class="plugin-anchor" href="#device-control-method"><i class="fa fa-link" aria-hidden="true"></i></a>Device Control Method</h4>
<p>Unlike Wi-Fi devices, it does not have the LAN delivery function. Only some delivery functions are supported.</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">publishDps</span><span class="token punctuation">(</span><span class="token class-name">String</span> dps<span class="token punctuation">,</span> <span class="token class-name">IResultCallback</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>param</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dps</td>
<td>String</td>
<td>data points</td>
</tr>
<tr>
<td>callback</td>
<td>IResultCallback</td>
<td>callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<p>Assuming that the device function point of the light is 101, the control code of the light is as follows:</p>
<pre class="language-"><code class="lang-java">mDevice<span class="token punctuation">.</span><span class="token function">publishDps</span><span class="token punctuation">(</span><span class="token string">&quot;{\&quot;101\&quot;: true}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IResultCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="rename-device"><a name="rename-device" class="anchor-navigation-ex-anchor" href="#rename-device"><i class="fa fa-link" aria-hidden="true"></i></a><a name="rename-device" class="plugin-anchor" href="#rename-device"><i class="fa fa-link" aria-hidden="true"></i></a>Rename Device</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#rename-device">Rename Device</a></p>
<h4 id="remove-device"><a name="remove-device" class="anchor-navigation-ex-anchor" href="#remove-device"><i class="fa fa-link" aria-hidden="true"></i></a><a name="remove-device" class="plugin-anchor" href="#remove-device"><i class="fa fa-link" aria-hidden="true"></i></a>Remove Device</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#remove-device">Remove Device</a></p>
<blockquote>
<p>The unbinding of Bluetooth devices is consistent with the Wi-Fi device.
<code>TuyaHomeSdk.newDeviceInstance(&quot;devId&quot;).removeDevice()</code> or <code>resetFactory()</code> 
But in addition to BLE cloud removal. If the device is locally connected at this time, the device will be automatically removed. If the device is offline at this time, only the cloud will be removed.</p>
</blockquote>
<h4 id="recycling-device-resources"><a name="recycling-device-resources" class="anchor-navigation-ex-anchor" href="#recycling-device-resources"><i class="fa fa-link" aria-hidden="true"></i></a><a name="recycling-device-resources" class="plugin-anchor" href="#recycling-device-resources"><i class="fa fa-link" aria-hidden="true"></i></a>Recycling Device Resources</h4>
<p>Consistent with Wi-Fi device  <a href="Device.html#recycling-device-resources">Recycling Device Resources</a></p>
<h2 id="ble-ota"><a name="ble-ota" class="anchor-navigation-ex-anchor" href="#ble-ota"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. BLE OTA</h2>
<p><strong>OTA process</strong></p>
<ul>
<li>Checking firmware information</li>
<li>Upgrade OTA</li>
</ul>
<h3 id="checking-firmware-information"><a name="checking-firmware-information" class="anchor-navigation-ex-anchor" href="#checking-firmware-information"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.1. Checking Firmware Information</h3>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">requestUpgradeInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> devId<span class="token punctuation">,</span> <span class="token class-name">IRequestUpgradeInfoCallback</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameters</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>devId</td>
<td>String</td>
<td>devId</td>
</tr>
<tr>
<td>callback</td>
<td>IRequestUpgradeInfoCallback</td>
<td>callback</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getMeshInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requestUpgradeInfo</span><span class="token punctuation">(</span>mDevID<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IRequestUpgradeInfoCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BLEUpgradeBean</span><span class="token punctuation">&gt;</span></span> bleUpgradeBeans<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">String</span> errorCode<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>BLEUpgradeBean</code>  data model</p>
<table>
<thead>
<tr>
<th>Parameters</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>upgradeStatus</td>
<td>int</td>
<td>0: No new version 1: New version available 2: In upgrade</td>
</tr>
<tr>
<td>version</td>
<td>String</td>
<td>Latest version</td>
</tr>
<tr>
<td>currentVersion</td>
<td>String</td>
<td>Current version</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>timeout, Unit s</td>
</tr>
<tr>
<td>upgradeType</td>
<td>int</td>
<td>0:Reminds to upgrade 2: Forced upgrade 3: Detect upgrade</td>
</tr>
<tr>
<td>type</td>
<td>int</td>
<td>0: Wi-Fi 1: BLE  2: GPRS 3: Zigbee 9: MCU</td>
</tr>
<tr>
<td>typeDesc</td>
<td>String</td>
<td>Upgrade description</td>
</tr>
<tr>
<td>lastUpgradeTime</td>
<td>long</td>
<td>Last upgrade time</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td>String</td>
<td>New firmware download url, <code>type</code> =<code>1</code> or <code>9</code> has value</td>
</tr>
<tr>
<td>fileSize</td>
<td>long</td>
<td>New firmware size</td>
</tr>
<tr>
<td>md5</td>
<td>String</td>
<td>New firmware MD5 value</td>
</tr>
</tbody>
</table>
<h3 id="ota-upgrade"><a name="ota-upgrade" class="anchor-navigation-ex-anchor" href="#ota-upgrade"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.2. OTA Upgrade</h3>
<p>You need to download the  new firmware to the local, in the previous step, and then perform OTA upgrade.</p>
<p><strong>Declaration</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">startBleOta</span><span class="token punctuation">(</span><span class="token class-name">String</span> uuid<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> version<span class="token punctuation">,</span> <span class="token class-name">String</span> binPackagePath<span class="token punctuation">,</span> <span class="token class-name">OnBleUpgradeListener</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameters</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>uuid</td>
<td>String</td>
<td><code>deviceBean.getUuid()</code></td>
</tr>
<tr>
<td>type</td>
<td>int</td>
<td>0: means <code>BLEUpgradeBean.type</code> = 1; 1: means<code>BLEUpgradeBean.type</code> = 9</td>
</tr>
<tr>
<td>version</td>
<td>String</td>
<td>New firmware version</td>
</tr>
<tr>
<td>binPackagePath</td>
<td>String</td>
<td>Local firmware path</td>
</tr>
<tr>
<td>listener</td>
<td>OnBleUpgradeListener</td>
<td>callback</td>
</tr>
</tbody>
</table>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getBleManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startBleOta</span><span class="token punctuation">(</span>uuid<span class="token punctuation">,</span> type<span class="token punctuation">,</span> version<span class="token punctuation">,</span> binPackagePath<span class="token punctuation">,</span> <span class="token keyword">new</span>  <span class="token class-name">OnBleUpgradeListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUpgrade</span><span class="token punctuation">(</span><span class="token keyword">int</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFail</span><span class="token punctuation">(</span><span class="token class-name">String</span> errorCode<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="error-code"><a name="error-code" class="anchor-navigation-ex-anchor" href="#error-code"><i class="fa fa-link" aria-hidden="true"></i></a>1.7. Error Code</h2>
<table>
<thead>
<tr>
<th>code</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Format of the packet received by the device is incorrect</td>
</tr>
<tr>
<td>2</td>
<td>The device cannot find the router</td>
</tr>
<tr>
<td>3</td>
<td>Wi-Fi password error</td>
</tr>
<tr>
<td>4</td>
<td>Device cannot connect to router</td>
</tr>
<tr>
<td>5</td>
<td>Device DHCP failed</td>
</tr>
<tr>
<td>6</td>
<td>The device fails to connect to the cloud</td>
</tr>
<tr>
<td>100</td>
<td>User cancels activation</td>
</tr>
<tr>
<td>101</td>
<td>Bluetooth connection error</td>
</tr>
<tr>
<td>102</td>
<td>Bluetooth service error found</td>
</tr>
<tr>
<td>103</td>
<td>Failed to open Bluetooth communication channel</td>
</tr>
<tr>
<td>104</td>
<td>Bluetooth failed to get device information</td>
</tr>
<tr>
<td>105</td>
<td>Bluetooth pairing failed</td>
</tr>
<tr>
<td>106</td>
<td>Activation timeout</td>
</tr>
<tr>
<td>107</td>
<td>Wi-Fi information transmission failed</td>
</tr>
<tr>
<td>108</td>
<td>Token is invalid</td>
</tr>
<tr>
<td>109</td>
<td>Failed to get Bluetooth encryption key</td>
</tr>
<tr>
<td>110</td>
<td>Device does not exist</td>
</tr>
<tr>
<td>111</td>
<td>Device cloud registration failed</td>
</tr>
<tr>
<td>112</td>
<td>Device cloud activation failed</td>
</tr>
<tr>
<td>113</td>
<td>Cloud device has been bound</td>
</tr>
<tr>
<td>114</td>
<td>Active disconnect</td>
</tr>
<tr>
<td>115</td>
<td>Failed to get device information in the cloud</td>
</tr>
<tr>
<td>116</td>
<td>The device is being networked by other methods at this time</td>
</tr>
<tr>
<td>117</td>
<td>OTA upgrade failed</td>
</tr>
<tr>
<td>118</td>
<td>OTA upgrade timeout</td>
</tr>
<tr>
<td>119</td>
<td>Wi-Fi parameter verification failed</td>
</tr>
</tbody>
</table>
<p><div id="gitalk-container"></div><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script>window.onload = function() {gitbook.events.on("page.change", function() {var gitalk = new Gitalk({"clientID":"1e739f11784288e253ba","clientSecret":"08d9a7ebeec2f5dbb9965c2521f66daf34eddd59","repo":"tuyasmart_home_android_sdk","owner":"TuyaInc","admin":["mimimumu","TuyaInc"],"labels":[],"distractionFreeMode":true,"id":"/resource/BLE.html"});gitalk.render("gitalk-container");});};var gitalk = new Gitalk({"clientID":"1e739f11784288e253ba","clientSecret":"08d9a7ebeec2f5dbb9965c2521f66daf34eddd59","repo":"tuyasmart_home_android_sdk","owner":"TuyaInc","admin":["mimimumu","TuyaInc"],"labels":[],"distractionFreeMode":true,"id":"/resource/BLE.html"});gitalk.render("gitalk-container");</script></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Push_umeng.html" class="navigation navigation-prev " aria-label="Previous page: Umeng">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="BLE.html#bluetooth-low-energy" class="navigation navigation-next " aria-label="Next page: Bluetooth Low Energy">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"TUYA BLE","level":"2.1","depth":1,"next":{"title":"Bluetooth Low Energy","level":"2.1.1","depth":2,"anchor":"#bluetooth-low-energy","path":"resource/BLE.md","ref":"./resource/BLE.md#bluetooth-low-energy","articles":[{"title":"Prepare","level":"2.1.1.1","depth":3,"anchor":"#prepare","path":"resource/BLE.md","ref":"./resource/BLE.md#prepare","articles":[]},{"title":"Scan Device","level":"2.1.1.2","depth":3,"anchor":"#scan-device","path":"resource/BLE.md","ref":"./resource/BLE.md#scan-device","articles":[]},{"title":"BLE Device Activation","level":"2.1.1.3","depth":3,"anchor":"#ble-device-activation","path":"resource/BLE.md","ref":"./resource/BLE.md#ble-device-activation","articles":[]},{"title":"Dual-mode Device Activation","level":"2.1.1.4","depth":3,"anchor":"#dual-mode-device-activation","path":"resource/BLE.md","ref":"./resource/BLE.md#dual-mode-device-activation","articles":[]},{"title":"BLE Device Function","level":"2.1.1.5","depth":3,"anchor":"#ble-device-function","path":"resource/BLE.md","ref":"./resource/BLE.md#ble-device-function","articles":[]},{"title":"BLE OTA","level":"2.1.1.6","depth":3,"anchor":"#ble-ota","path":"resource/BLE.md","ref":"./resource/BLE.md#ble-ota","articles":[]},{"title":"Error Code","level":"2.1.1.7","depth":3,"anchor":"#error-code","path":"resource/BLE.md","ref":"./resource/BLE.md#error-code","articles":[]}]},"previous":{"title":"Umeng","level":"1.16.2","depth":2,"path":"resource/Push_umeng.md","ref":"./resource/Push_umeng.md","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight","anchors","splitter","github","github-buttons","anchor-navigation-ex","flexible-alerts","expandable-chapters-small","favicon","ga","pageview-count","gtalk","language-picker","hide-element","sf-score","mermaid-gb3"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"java":"java"},"ignore":["sequence"]},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/TuyaInc/tuyasmart_home_android_sdk"},"livereload":{},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"js-sequence-diagram-full":{},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"gtalk":{"clientID":"1e739f11784288e253ba","clientSecret":"08d9a7ebeec2f5dbb9965c2521f66daf34eddd59","repo":"tuyasmart_home_android_sdk","owner":"TuyaInc","admin":["mimimumu","TuyaInc"],"labels":[],"distractionFreeMode":true},"mermaid-gb3":{},"anchor-navigation-ex":{"associatedWithSummary":false,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"favicon":{"shortcut":"zh-hans/resource/images/bitbug_favicon.ico"},"pageview-count":{},"github-buttons":{"buttons":[{"user":"TuyaInc","repo":"tuyasmart_home_android_sdk","type":"star","size":"small"},{"user":"TuyaInc","repo":"tuyasmart_home_android_sdk","type":"watch","size":"small"},{"user":"TuyaInc","type":"follow","size":"small","count":true}]},"sf-score":{},"expandable-chapters-small":{},"flexible-alerts":{"danger":{"className":"danger","icon":"fa fa-ban","label":{"zh-hans":"æ³¨æ","en":"Attention"}},"note":{"className":"info","icon":"fa fa-info-circle","label":{"zh-hans":"æç¤º","en":"Note"}},"style":"flat","tip":{"className":"tip","icon":"fa fa-lightbulb-o","label":{"zh-hans":"Tips","en":"Tip"}},"warning":{"className":"warning","icon":"fa fa-exclamation-triangle","label":{"zh-hans":"è­¦å","en":"Warning"}}},"ga":{"configuration":"auto","token":"UA-161421048-1"},"versions":{"options":[{"text":"Version 3.19.x"},{"value":"https://github.com/TuyaInc/tuyasmart_home_android_sdk_doc/tree/3.17.6","text":"Version 3.17.6"},{"value":"https://github.com/TuyaInc/tuyasmart_home_android_sdk_doc/tree/3.14.5","text":"Version 3.14.5"},{"value":"https://github.com/TuyaInc/tuyasmart_home_android_sdk_doc/tree/3.13.0","text":"Version 3.13.0"}]},"sharing":{"facebook":true,"twitter":true,"google":true,"weibo":true,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/BLE.md","mtime":"2020-07-27T14:05:35.961Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-11-02T08:41:01.743Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sf-score/lib/scorePlugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <script src="../../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

